<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>

  <style>
  	body {
      font-family: "Source Sans Pro","Helvetica Neue",Helvetica,Arial,"Nimbus Sans L",sans-serif; 
      max-width: 650px; 
      font-size: 16px;
      overflow-y: scroll;
    }

  	.container {
  		position:relative; 
  		height:700px;
  		border: solid 0.5px #D3D3D3
  	}

  	#map-canvas {
  		position: absolute; 
  		top: 0; 
  		left: 0; 
  		height: 100%; 
  		width: 100%;
  	}
  	.panel {
  		position: absolute; 
  		bottom: 0px; 
  		left: 0; 
  		margin-bottom: 0px; 
  		width: 100%; 
  		display: block; 
  		font-size: 14px; 
  		line-height: 16px; 
  		color: #000000; 
  		background-color: rgba(255,255,255,0.8); 
  		z-index:1; 
  		height:70%;
  	}

    .panel.transparent {
      background-color: rgba(255,255,255,0);
    }

    .textbox.white {
      background-color: rgba(255,255,255,0.8); 
    }

  	.textbox {
  		padding:10px 36px;
  		color: #33333c;
  	} 

  	.title-intro{
  		position: absolute; 
  		bottom: 0px; 
  		left: 0; 
  		font-size: 38px;
  		font-weight: bold;
  		padding: 20px 36px;
  		line-height: 45px;
  		background-color: rgba(0,0,0,0.7); 
  		color: white;
  	}

  	.title {
  		font-size: 22px;
  		font-weight: bold;
  		margin: 15px 0px;
  		line-height: 24px;
  	}

  	.desc {
  		font-size: 16px;
  		margin: 10px 0px;
  		line-height: 20px;
  	}

    #credit {
      font-size: 12px;
      color: #808080;
      font-style: italic;
    }

    #note {
      font-size: 12px;
      color: #0266C8;
      padding-right:0;
    }

    #logo {
      padding:0 0 0 5px;
    }
  	
  	.arrow{
  		height:20px;
  		width:20px;
  		border-radius: 20px;
    	text-align: center;
    	background: #E7E7E7;
    	color: #5A5A5A;
    	text-decoration: none;
    	text-shadow: 0 0 1px #000;
    	font-size:14px;
    	box-shadow: 0 0 2px #999;
    	z-index: 2;
    	position: absolute;
  		bottom:10%;
  		cursor: pointer;
  	}

  	#arrow-left {
  		left:8px;
  	}

  	#arrow-right {
  		right:8px;
  	}

  	.arrow.inactive {
  		opacity:0.5;
  	}

  	.icon-box {
  		width:120px;
  		position: fixed;
  		bottom:10%;
  		left:50%;
  		margin-left: -60px;
  		z-index:2;
  		display:none;
  		background-color: #D3D3D3;
  		border-radius: 5px;
  		padding: 5px;
  	}

  	#icon {
  		height:40px;
  	}

  	.icon-text {
  		font-size: 12px;
  		text-align: center;
  	}

  @media (max-width: 500px ) {
  	.icon-box {display:block;}
    .panel {height: 60%}
  } 


  @media (max-width: 400px ) { 
  	.container {
  		height:550px;
  	}



  	.title-intro{
  		font-size: 20px;
  		line-height:24px;
  		padding: 15px 15px;
  	}

  	.desc {
  		font-size: 13px;
  		line-height: 14px;
  	}

  	.title{
  		font-size: 16px;
  		line-height: 21px;
  		margin: 5px 0px;
  	}	

  	.arrow{bottom:15%;}

    #note, #credit {font-size: 11px; line-height: 11px;}
    #credit {margin-top: 5px;}

  }

  </style>

<body>
	 <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <script type="text/javascript" src="http://kuangkeng.github.io/pri-projects/dragend.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.22&libraries=geometry,visualization&sensor=false"></script>


<div class="container-fluid">  
  <div class="row">
  	<div class="col-sm-12 col-xs-12 container">
	    <div class="arrow" id="arrow-left"><</div>
	    <div class="arrow" id="arrow-right">></div>
	    <div id="map-canvas"></div>
    	<div class="panel">
	      <div class="dragend-page" id="page00">
	      	<div class="mediabox embed-responsive embed-responsive-16by9">
	      		
	      		<div class="title-intro">One Cuban Family’s 6,600-mile trail to America</div>
	      	</div>
		    <div class="textbox">
		    	<div class="desc"><p>As the United States and Cuba re-establish ties, thousands of Cubans have left the island, worried that the new relations will end a US long-standing policy that gives them a fast-track to a green card if they reach US soil.</p><p>Cubans have long been considered political refugees. But instead of riding rafts for 90 miles to Florida, many Cubans — like the family photographer Mónica González followed for this story — are opting for a much longer, and legal, journey. To avoid being caught in the Florida Straits, they are taking planes and buses through Latin America to reach the US border.</p>
            <div class="row">
              <div class="col-sm-9 col-xs-8" id="note">A project in collaboration with <a href='http://www.periodistasdeapie.org.mx/'  target='_blank'>Periodistas de a Pie</a> and its <a href='http://enelcamino.periodistasdeapie.org.mx/'  target='_blank'>En El Camino project</a>.</div>
              <div class="col-sm-3 col-xs-4"id="logo"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/logo_periodistas-resized.png" class="img-responsive center-block"></div>
            </div>
            <div id="credit">All photos by Mónica González</div>
          </div>
		    </div>
	      </div>    		
	      <div class="dragend-page" id="page01">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-4_GONZALEZ%20FAMILY%20PORTRAIT-cropped.jpg" class="img-responsive"></div>
		    <div class="textbox">
		    	<div class="title">Departure: Havana, August 2015</div>
		    	<div class="desc">That is when the González family sold their home in Havana and flew to Ecuador, which does not require visas from Cubans (a policy that has since changed). The family, photographed at a shelter they eventually reached in Costa Rica, from left to right: Lizandra Blanco Aguilar, Osmany Jesús González Gutiérrez and their son, Johan Jesús González Blanco.</div>
		    </div>
	      </div>
	      <div class="dragend-page" id="page02">
	      	<div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-quito-ecuador-cropped.jpg" class="img-responsive"></div>
	      	<div class="textbox">
	      		<div class="title">Quito, Ecuador</div>
		    	<div class="desc">The family stayed here until October 2015.</div>	
	      	</div>
	      </div>
	      <div class="dragend-page" id="page03">
	      	<div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-panama-city-cropped.jpg" class="img-responsive"></div>
	      	<div class="textbox">
	      		<div class="title">Panama City, Panama</div>
		    	<div class="desc">From Ecuador, the González family took a bus to Colombia, went through La Miel and then flew to Panama City.</div>
	      	</div>
	      </div>
	      <div class="dragend-page" id="page04">
	      	<div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-6_COSTA%20RICA%20SHELTER-cropped.jpg" class="img-responsive"></div>
	      	<div class="textbox">
	      		<div class="title">La Cruz, Costa Rica. November 15, 2015</div>
		    	<div class="desc"><p>Next, the family bused to La Cruz, Costa Rica on November 15, 2015. That month, the Nicaraguan government decided to close its border with Costa Rica to Cubans wanting to cross through with permission to continue north to the US.</p><p>The González family stayed 82 days at a shelter, a converted school, in La Cruz. Thousands of Cubans have passed through shelters like these in Costa Rica in recent months, fearing the end of US immigration policy that offers them special political refugee status if they reach US soil.</p></div>
	      	</div>
	      </div>
        <div class="dragend-page" id="page05">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-12_GONZALEZ_SHELTER_CR-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">La Cruz, Costa Rica</div>
          <div class="desc">Lizandra Blanco Aguilar kept in touch through Facebook with her grandmother, who lives in Tampa, Florida, where the family headed.</div>
          </div>
        </div>
        <div class="dragend-page" id="page06">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-14_LEAVING_COSTA%20RICA-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">San Salvador, El Salvador, February 2016</div>
          <div class="desc">In early February, the González family flew from Liberia, Costa Rica, to San Salvador, El Salvador, bypassing Nicaragua at a cost of $500 per passenger. Next, they boarded buses to Ciudad Hidalgo, Mexico. From there, some Cubans flew to Mexican cities on the US border. The González family could not afford the tickets and took a bus to reach the United States.</div>
          </div>
        </div>
        <div class="dragend-page" id="page07">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-16_PAPERS-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">Ciudad Hidalgo, Mexico</div>
          <div class="desc">Cubans received documentation from Mexican migration officials allowing them to pass legally through the country for up to 20 days.</div>
          </div>
        </div>
        <div class="dragend-page" id="page08">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-15_BUS%20LEAVING%20COSTA%20RICA-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">Ciudad Hidalgo, Mexico, February 4, 2016</div>
          <div class="desc">The González family contracted a private bus bound for Nuevo Laredo, Tamaulipas, just across the border from Laredo, Texas.</div>
          </div>
        </div>
        <div class="dragend-page" id="page09">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-24_%20BUS-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">To Nuevo Laredo, Mexico</div>
          <div class="desc">The trip would take 36 hours and cost $130 per adult and $65 per chid.</div>
          </div>
        </div>
        <div class="dragend-page" id="page10">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-18_SAFE%20ROUTE-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">Traveling through Mexico</div>
          <div class="desc">The bus took a longer route to the Texas border to avoid parts of Mexico run by drug cartels, where the organized groups tended to charge “tolls” to pass through their controlled areas. The bus passed through the following states: Chiapas, Veracruz, Oaxaca, Puebla, Estado de México, Querétaro, Guanajuato, San Luis Potosí, Coahuila and Nuevo León.</div>
          </div>
        </div>
        <div class="dragend-page" id="page11">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-26_%20CHICKEN-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">Puebla, Mexico</div>
          <div class="desc">The González family picked up some roasted chicken.</div>
          </div>
        </div>
        <div class="dragend-page" id="page12">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-20_ON%20THE%20BUS-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">To Nuevo Laredo, Mexico</div>
          <div class="desc">Mexican migration officials, the army and federal police stopped the bus eight times as it passed through the states of Chiapas and Veracruz in order to check passengers’ documentation.</div>
          </div>
        </div>
        <div class="dragend-page" id="page13">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-33_BRIDGE-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">Nuevo Laredo, Mexico. February 7, 2016</div>
          <div class="desc">Finally, the bus arrived at Nuevo Laredo, Tamaulipas. The González family walked across a bridge connecting Nuevo Laredo, Mexico and Laredo, Texas. </div>
          </div>
        </div>
        <div class="dragend-page" id="page14">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-34_ASYLUM-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">Asking for asylum</div>
          <div class="desc">On the US side of the border, Cuban migrants asked for documents in order to seek asylum in the US. They received approval within 24 hours. </div>
          </div>
        </div>
        <div class="dragend-page" id="page15">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-35_CUBANOS_EN_LIBERTAD-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">Laredo, Texas</div>
          <div class="desc">Cubanos en Libertad, a non-profit group based in Laredo, sells a $300 package that includes a place to rest for a few hours, food, and a bus to different locations in the United States.</div>
          </div>
        </div>
        <div class="dragend-page" id="page16">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-39_WAITING%20AT%20LIBERTAD-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">Laredo, Texas</div>
          <div class="desc">The González family rested, ate and showered at a home rented by Cubanos en Libertad in Laredo before boarding a bus for Tampa, Florida.</div>
          </div>
        </div>
        <div class="dragend-page" id="page17">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-44_ONTO%20FLORIDA-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">On to Florida</div>
          <div class="desc">The Tampa-bound bus ride took 22 hours. Three other families shared the van with the González family.</div>
          </div>
        </div>
        <div class="dragend-page" id="page18">
          <div class="mediabox"><img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/cuba-florida-route-45_ARRIVED-cropped.jpg" class="img-responsive"></div>
          <div class="textbox">
            <div class="title">Tampa, Florida, February 8, 2016</div>
          <div class="desc">More than five months after leaving Cuba, the González family reunited with relatives in Florida. Lizandra Blanco Aguilar’s grandmother met her grandson for the first time.</div>
          </div>
        </div>

	    </div> 
	    <div class="icon-box">
	      	<img src="http://cdn1.pri.org/sites/default/files/styles/original_image/public/mobile-swipe-icon.png" class="img-responsive center-block" id="icon">
	      	<div class="icon-text">Swipe on mobile</div>
	    </div>
	</div>     
  </div>
</div>

<script>

	var cities = [
    [-83.611669, 66.571639],
    [23.0658289,-82.37154],
    [-0.2058146,-78.476688],
    [9.067, -79.38703],
    [11.070771, -85.629931],
    [11.070771, -85.629931],
    [13.686514, -89.218557],
    [14.67925, -92.15194],
    [14.67925, -92.15194],
    [27.478425, -99.548027],
    [27.478425, -99.548027],
    [25.4322635,-101.3095286],
    [27.478425, -99.548027],
    [27.478425, -99.548027],
    [27.478425, -99.548027],
    [27.530587, -99.479600],
    [27.530587, -99.479600],
    [27.530587, -99.479600],
    [27.953142, -82.429488],
	];

  var points = [
    [6, -80.023992],
    [23.0658289,-82.37154],
    [-0.2058146,-78.476688],
    [8.067, -79.38703],
    [10.070771, -85.629931],
    [11.070771, -85.629931],
    [12.686514, -89.218557],
    [14.67925, -92.15194],
    [14.67925, -92.15194],
    [16.478425, -95.548027],
    [21.478425, -99.548027],
    [25.4322635,-101.3095286],
    [26.478425, -100.548027],
    [27.478425, -99.548027],
    [27.478425, -99.548027],
    [27.530587, -99.479600],
    [27.530587, -99.479600],
    [31.530587, -90.479600],
    [28.953142, -82.429488],
  ];

	var markers = [];
  var extra1 = {lat: 6.1031, lng: -75.62198};
  var extra2 = {lat: 10.63459, lng: -85.44067};

function init() {
	$("#arrow-left").hide();
  $(".panel").addClass("transparent");
  $(".textbox").addClass("white");
	$(".panel").dragend({
		onSwipeStart: function(){
			$(".panel").removeClass("transparent");
      $(".textbox").removeClass("white");
      var page = $(this.activeElement).index();				
            console.log("page: " + page);
            $(".icon-box").fadeOut("slow");

		},
		onSwipeEnd: function(){
			var endpage = $(this.activeElement).index();
			console.log("end page: " + endpage);
      selectCity(endpage);
      
			if(18>endpage>0){
            	$("#arrow-left").show();
              $("#arrow-right").show();
            }
      if(endpage==0){
              $("#arrow-left").hide();
              $(".panel").addClass("transparent");
              $(".textbox").addClass("white");
            }      
      if(endpage==18){
            	$("#arrow-right").hide();
            } 
		}

	});

	$("#arrow-left").click(function(){
		$(".panel").dragend("right");
	});

	$("#arrow-right").click(function(){
		$(".panel").dragend("left");
	});

	var mapOptions = {
    	streetViewControl: false,
    	zoom: 4,
      maxZoom: 10,
    	zoomControl: true,
    	zoomControlOptions: {
    	style: google.maps.ZoomControlStyle.SMALL,
      position: google.maps.ControlPosition.LEFT_TOP
		},
		center: new google.maps.LatLng(6, -80.023992)
	};
	var map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);
  var ctaLayer = new google.maps.KmlLayer({
    url: 'http://kuangkeng.github.io/pri-projects/map-entire.kml',
    map: map,
    suppressInfoWindows: true,
    preserveViewport: true,
  });

	for (var i = 0; i < cities.length; i++) {
		var city = cities[i];
		var myLatLng = new google.maps.LatLng(city[0], city[1]);

		markers[i] = new google.maps.Marker({
		    position: myLatLng,
		    map: map,
		    title: city[2],
		});
		(function(marker,i){
		    google.maps.event.addListener(marker, 'click', function(){ 
		    if (i==0){
          map.setZoom(4);
          var centerLatLng = new google.maps.LatLng((points[i][0]), points[i][1]);
        } 
        else {
          map.setZoom(5);
          var centerLatLng = new google.maps.LatLng((points[i][0]-8), points[i][1]);
        }
         
		     map.panTo(centerLatLng);
		     }); 
		}(markers[i],i));
	}

  var extraMarker1 = new google.maps.Marker({
    position: extra1,
    map: map,
    title: 'La Miel'
  });

  var extraMarker2 = new google.maps.Marker({
    position: extra2,
    map: map,
    title: 'Liberia'
  })




}
//function init finishes here

function selectCity (i) {
  google.maps.event.trigger(markers[i], 'click');
} 




	google.maps.event.addDomListener(window, 'load', init);
		
</script>

</body>
</html>

