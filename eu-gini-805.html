<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
  width: 100%;
  max-width: 850px;
  margin:0px auto;
  font-family: "Source Sans Pro","Helvetica Neue",Helvetica,Arial,"Nimbus Sans L",sans-serif;
  font-size: 112.5%;
  line-height: 1.5em;
  color: #33333c;
      }  

#tabs {
  height: 805px; 
  width: 100%; 
  max-width: 850px; 
  margin: 0 auto; 
}

#container01, #container02, #container03 {
  height: 600px; 
  width: 100%; 
  max-width: 800px; 
  margin: 0 auto;
}


#note {
    font-size: 11px;
    color: #808080;
    line-height: 14px;
    padding:0px 10px 10px 10px;
}

#credit {
    font-size: 10px;
    padding-top: 10px;
    text-align: right;
}

#text {
    font-size: 14px;
    font-weight: normal;
    padding-bottom: 10px;
    color:#333;
    line-height: 20px;
}

.highcharts-title {width:100% !important;}

.customlabel {font-size: 10px; font-weight: bold;}

@media (max-width: 900px ) { 
  #container02, #container03  {
    padding-right: 3%;
  }
} 

@media (max-width: 600px ) { 
  #container02, #container03  {
    padding-right: 8%;
  }
}  

@media (max-width: 400px ) { 
    #text {font-size: 12px;line-height: 14px;padding-bottom: 3px;}
    .ui-tabs-anchor {padding:5px !important;}
    .ui-tabs-panel {padding-left:0px !important; padding-right: 0px !important;}
    .highcharts-title {font-size: 14px !important;}
} 

</style>
</head>

<body>
<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Gini coefficient</a></li>
    <li><a href="#tabs-2">Changes</a></li>
  </ul>
  <div id="tabs-1">
    <div id="container01"></div>
    <div id="note">
        <div id="text"><span style="color:#4188bc">Blue bar:</span> Inequality has narrowed compared to 2005.<br><span style="color:#FF1300">Red bar:</span> Inequality has widen compared to 2005.<br>Move your mouse or finger over each bar for more details.</div>
        Source: 
        <a href='http://ec.europa.eu/eurostat/tgm/table.do?tab=table&init=1&plugin=1&language=en&pcode=tessi190' target='_blank'><u>Eurostat</u>
</a>
        <div id="credit">Kuang Keng Kuek Ser / PRI</div>
    </div>
  </div>
  <div id="tabs-2">
    <div id="container02"></div>
    <div id="note">
        <div id="text">Gini coefficient is the most commonly used measure of inequality. Higher Gini coefficient means higher income inequality. A drop in Gini coefficient indicates income inequality has narrowed and vice versa. Move your mouse or finger over each line for more details.</div>
        Source: 
        <a href='http://ec.europa.eu/eurostat/tgm/table.do?tab=table&init=1&plugin=1&language=en&pcode=tessi190' target='_blank'><u>Eurostat</u></a>
        <div id="credit">Kuang Keng Kuek Ser / PRI</div>
    </div>
  </div> 
</div>
  
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<script>
$(function() {
  $( "#tabs" ).tabs();
});

$(function () {
    var chart1;
    var chart2;
    var chart3;
    $(document).ready(function() {

        Highcharts.setOptions({
            lang: {
              thousandsSep: ','
            }
        }),

        chart1 = new Highcharts.Chart({
            chart: {
                renderTo: 'container01',
                type: 'bar',
            },
            title: {
                text: 'Income inequality (Gini coefficient) in key EU countries, 2014',
                margin: 20,
            },
            subtitle: {
                enabled: false,
            },
            xAxis: {
                categories: ["Bulgaria","Spain","Romania","Greece","Portugal","Italy","UK","Ireland","Poland","Germany","France","Hungary","Denmark","Austria","Netherlands","Slovakia","Belgium","Finland","Sweden","Czech",],  
                tickColor: '#ffffff', 
                labels: {
                    x:10,
                    align:'left',
                    style: {
                        color: '#ffffff',
                        fontSize: '11px',
                    },  
                }
            },
            yAxis: {
                title: {
                  text: 'Gini coefficient<br>(larger value indicates higher inequality)',
                  style: {
                    color: '#808080',
                    fontSize: '11px',
                  },  
                },
                endOnTick: false,
                minTickInterval:10,
            },
            credits: { enabled: false, },
            legend: {enabled: false,},
            tooltip: {
                pointFormat: 'Gini coefficient: <b>{point.y:.1f}</b><br>Change since 2005: <b>{point.change:,.1f}</b><br>Percentage of change: <b>{point.pct:,.1f}%</b>',
            },
            plotOptions: {
                series:{
                    groupPadding: 0.05,
                    pointPadding: 0,
                    stickyTracking: false,
                    dataLabels: {
                        enabled: true,
                        style: {
                            fontSize: '11px',
                        },
                        formatter: function() {
                            return this.y
                        },
                    }
                },
            },    

            series: [ 
                {name:"Rates", data: [
                    {y:35.4, change:4.2, pct:13.5, color: "#FF1300" },
                    {y:34.7, change:2.5, pct:7.8, color: "#FF1300" },
                    {y:34.7, change:-3.1, pct:-8.2, color: "#4188bc" },
                    {y:34.5, change:1.3, pct:3.9, color: "#FF1300" },
                    {y:34.5, change:-3.6, pct:-9.4, color: "#4188bc" },
                    {y:32.4, change:-0.3, pct:-0.9, color: "#4188bc" },
                    {y:31.6, change:-3, pct:-8.7, color: "#4188bc" },
                    {y:30.8, change:-1.1, pct:-3.4, color: "#4188bc" },
                    {y:30.8, change:-4.8, pct:-13.5, color: "#4188bc" },
                    {y:30.7, change:4.6, pct:17.6, color: "#FF1300" },
                    {y:29.2, change:1.5, pct:5.4, color: "#FF1300" },
                    {y:28.6, change:1, pct:3.6, color: "#FF1300" },
                    {y:27.7, change:3.8, pct:15.9, color: "#FF1300" },
                    {y:27.6, change:1.3, pct:4.9, color: "#FF1300" },
                    {y:26.2, change:-0.7, pct:-2.6, color: "#4188bc" },
                    {y:26.1, change:-0.1, pct:-0.4, color: "#4188bc" },
                    {y:25.9, change:-2.1, pct:-7.5, color: "#4188bc" },
                    {y:25.6, change:-0.4, pct:-1.5, color: "#4188bc" },
                    {y:25.4, change:2, pct:8.5, color: "#FF1300" },
                    {y:25.1, change:-0.9, pct:-3.5, color: "#4188bc" },

                ]},
            ],
            });

        chart2 = new Highcharts.Chart({
        chart: {
          type: 'line',
          renderTo: 'container02',
          //marginRight: 50 //add margin for text
        },
        title: {
            text: "Changes in Gini coefficient, 2005-2014",
        },
        subtitle: {
            enabled: false,
        },
  
        xAxis: {
            categories: ["2005","2014"],
            plotLines: [{
              color: '#d8d8d8',
              value: 0,
              width: 1
              },
              {
              color: '#d8d8d8',
              value: 1,
              width: 1
              },
            ],
            tickmarkPlacement: 'on',
        },
        yAxis: {
            title: {
                text: null,
            },
            labels:{
                x:-2,
            },
            minTickInterval:5,
            //floor:23,
            //celling: 39,
            endOnTick: false,
            startOnTick: false,
            
        },
        tooltip: {
            formatter: function() {
                return this.x + "<br>Country: <b>" + this.series.name + "</b><br>" + "Gini coefficient: <b>" + this.point.y + "</b><br>Change (2005-2014): <b>" +  this.point.change + "</b><br>Percentage of change: <b>" + this.point.pct + "%</b>"
            },
        },
        
        legend: {enabled: false},
        credits: {enabled: false},
        series: [
            {name: "Bulgaria", data: [{y:31.2, change:4.2, pct:13.5},{y:35.4, change:4.2, pct:13.5}], color: "#FF1300" },
            {name: "Spain", data: [{y:32.2, change:2.5, pct:7.8},{y:34.7, change:2.5, pct:7.8}], color: "#FF1300" },
            {name: "Romania", data: [{y:37.8, change:-3.1, pct:-8.2},{y:34.7, change:-3.1, pct:-8.2}], color: "#4188bc" },
            {name: "Greece", data: [{y:33.2, change:1.3, pct:3.9},{y:34.5, change:1.3, pct:3.9}], color: "#FF1300" },
            {name: "Portugal", data: [{y:38.1, change:-3.6, pct:-9.4},{y:34.5, change:-3.6, pct:-9.4}], color: "#4188bc" },
            {name: "Italy", data: [{y:32.7, change:-0.3, pct:-0.9},{y:32.4, change:-0.3, pct:-0.9}], color: "#4188bc" },
            {name: "UK", data: [{y:34.6, change:-3, pct:-8.7},{y:31.6, change:-3, pct:-8.7}], color: "#4188bc" },
            {name: "Ireland", data: [{y:31.9, change:-1.1, pct:-3.4},{y:30.8, change:-1.1, pct:-3.4}], color: "#4188bc" },
            {name: "Poland", data: [{y:35.6, change:-4.8, pct:-13.5},{y:30.8, change:-4.8, pct:-13.5}], color: "#4188bc" },
            {name: "Germany", data: [{y:26.1, change:4.6, pct:17.6},{y:30.7, change:4.6, pct:17.6}], color: "#FF1300" },
            {name: "France", data: [{y:27.7, change:1.5, pct:5.4},{y:29.2, change:1.5, pct:5.4}], color: "#FF1300" },
            {name: "Hungary", data: [{y:27.6, change:1.0, pct:3.6},{y:28.6, change:1.0, pct:3.6}], color: "#FF1300" },
            {name: "Denmark", data: [{y:23.9, change:3.8, pct:15.9},{y:27.7, change:3.8, pct:15.9}], color: "#FF1300" },
            {name: "Austria", data: [{y:26.3, change:1.3, pct:4.9},{y:27.6, change:1.3, pct:4.9}], color: "#FF1300" },
            {name: "Netherlands", data: [{y:26.9, change:-0.7, pct:-2.6},{y:26.2, change:-0.7, pct:-2.6}], color: "#4188bc" },
            {name: "Slovakia", data: [{y:26.2, change:-0.1, pct:-0.4},{y:26.1, change:-0.1, pct:-0.4}], color: "#4188bc" },
            {name: "Belgium", data: [{y:28, change:-2.1, pct:-7.5},{y:25.9, change:-2.1, pct:-7.5}], color: "#4188bc" },           
            {name: "Finland", data: [{y:26, change:-0.4, pct:-1.5},{y:25.6, change:-0.4, pct:-1.5}], color: "#4188bc" },           
            {name: "Sweden", data: [{y:23.4, change:2, pct:8.5},{y:25.4, change:2, pct:8.5}], color: "#FF1300" },
            {name: "Czech", data: [{y:26, change:-0.9, pct:-3.5},{y:25.1, change:-0.9, pct:-3.5}], color: "#4188bc" },
        ], 
        plotOptions: {
            series: {
                marker: {
                    enabled: false
                },
                dataLabels: {
                    enabled: true,
                    align: 'right',
                    x:0,
                    y:10,
                    allowOverlap: true,
                    style: {
                        fontSize: '10px',
                    },
                    formatter: function() {
                        if (this.point.y===this.series.data[0].y){
                            if (this.series.name=="France"){return "";}
                            if (this.series.name=="Finland"){return "";}
                            if (this.series.name=="Slovakia"){return "";}
                            if (this.series.name=="Germany"){return "";}
                            if (this.series.name=="Czech"){return "";}
                            if (this.series.name=="Hungary"){return "";}
                            else {return this.series.name;}    
                        }
                    },
                }
            },

        },
    });

        $(chart2.series).each(function(){
          var point = this.points[this.points.length-1];
          if (point.y==29.2 || point.y==25.6 || point.y==26.1 || point.y==30.7 || point.y==25.1 || point.y==28.6)
            {
          chart2.renderer.text(this.name,
          point.plotX + chart2.plotLeft + 5,
          point.plotY + chart2.plotTop + 5)
          .attr({zIndex: 5, class:"customlabel"}).add();
            }
        });


    });
    
});
</script>  
</body>
</html>  

