<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>

  <style>
    body {
      font-family: "Source Sans Pro","Helvetica Neue",Helvetica,Arial,"Nimbus Sans L",sans-serif;
      font-size: 16px;
      color: #33333c;
    }

    #islamquiz {
      max-width: 897px;
      margin:0px auto;
    }
    
    .box {
      cursor: pointer;
      margin:5px;
      display: inline-block;
      position: relative;
      width: 275px;
      height:150px;
      background: #ffeaa5;
      -webkit-box-shadow: 5px 5px 11px -5px rgba(119,119,119,0.88);
      -moz-box-shadow: 5px 5px 11px -5px rgba(119,119,119,0.88);
      box-shadow: 5px 5px 11px -5px rgba(119,119,119,0.88);
    }

    .box:hover {
      background: #ffd85c;
    }

    #bottombox {
      position: fixed;
      bottom:0px;
      padding-bottom: 10px;
      padding-top: 5px;
      z-index: 1;
      width:100%;
      max-width:870px;
      height:130px;
      background-color: white;
    }

    .dropbox {
      display: inline-block;
      position: relative;
      margin:0px 5px;
      width: 275px;
      height:115px;
      background-color: #8d89e9;
      border-radius: 10px;
      -webkit-box-shadow: 7px 8px 11px -5px rgba(119,119,119,0.88);
      -moz-box-shadow: 7px 8px 11px -5px rgba(119,119,119,0.88);
      box-shadow: 7px 8px 11px -5px rgba(119,119,119,0.88);
    }

    .text {
      display: flex;
      color: #292929;
      font-size: 16px;
      padding:10px; 
      font-weight: 500;     
    }

    .popup {
      z-index: 3;
      border-radius: 10px;
      -webkit-box-shadow: 9px 10px 11px -5px rgba(119,119,119,0.88);
      -moz-box-shadow: 9px 10px 11px -5px rgba(119,119,119,0.88);
      box-shadow: 9px 10px 11px -5px rgba(119,119,119,0.88);
    }

    #correctbox {
      width:300px;
      height:150px;
      background-color: #1d3d86;
      position: fixed;
      top:50%;
      left:50%;
      margin-top:-100px;
      margin-left:-150px;
      opacity:0.9;
    }

    #wrongbox {
      width:300px;
      height:300px;
      background-color: #a31d27;
      position: fixed;
      top:50%;
      left:50%;
      margin-top:-150px; 
      margin-left:-150px; 
      opacity:0.9;
    }

    #replaybox {
      width:300px;
      height:180px;
      background-color: #a31d27;
      position: fixed;
      top:50%;
      left:50%;
      margin-top:-90px;
      margin-left:-150px;
    }

    #winbox {
      width:300px;
      height:180px;
      background-color: #1d3d86;
      position: fixed;
      top:50%;
      left:50%;
      margin-top:-90px; 
      margin-left:-150px; 
    }

    #startbox {
      width:600px;
      height:470px;
      background-color: #1d3d86;
      position: fixed;
      top:50%;
      left:50%;
      margin-top:-250px; 
      margin-left:-300px;
      z-index:3;
    }

    #bufferbox {
      height:150px;
      width:100%;
    }

    .sect {
      margin:0px auto;
      font-size: 20px;
      font-weight: bold;
      text-align: center;
      margin-top:10px;
      margin-bottom: -10px;

    }

    .counter, .correctmsg, .wrongmsg {
      margin:0px auto;
      font-size: 60px;
      font-weight: bold;
      text-align: center;
      text-shadow: 2px 2px 3px #c1c1c1;
    }

    .correctmsg {
      color: white;
      margin-top: 10%;
    }

    .wrongmsg {
      color: white;
      margin-top: 5%;
    }

    .wrongnum {
      margin:0px auto;
      font-size: 110px;
      font-weight: bold;
      text-align: center;
      color: white;
      margin-top: -20px;
      margin-bottom: -20px;
      text-shadow: 2px 2px 3px #c1c1c1;
    }

    .wrongtext, .starttext {
      margin:0px auto;
      font-size: 20px;
      
      text-align: center;
      color: white;
      
    }

    .starttext {
      text-align: left;
      padding:0px 30px 10px;
    }

    .overmsg, .winmsg, .startmsg {
      margin:0px auto;
      font-size: 40px;
      text-align: center;
      color: white;
      padding:20px;
      text-shadow: 2px 2px 3px #c1c1c1;
    }

    .darken:before {
      background: black;
      content: "";
      opacity: 0.4;
      position: absolute;
      top:0;
      left:0;
      width: 100%;
      height: 100%;
      z-index: 2;
    }

    .selected{
      z-index: 2;
      background-color: #ffd85c
    }

    .active {
      background-color: #a6a3e9;
    }

    .hover {
      background-color: #6460d3;
    }
    
    @media (max-width: 900px ) {
      .dropbox {
        width: 180px;
      }  
    
      #startbox {
        width:500px;
        height:480px;
        margin-top:-310px; 
        margin-left:-250px; 
      }   
      
      .startmsg {
        font-size: 35px;
        padding-top: 15px;
      }
    }

    @media (max-width: 600px ) { 
      .dropbox {
        width: 98px;
        margin-left: -5px;
      }
      
      .box {
        height:100%;
      }
    
      .sect {
        font-size: 13px;
      }
    
      #startbox {
        width:300px;
        height:490px;
        margin-top:-310px; 
        margin-left:-150px; 
      }
      
      .startmsg {
        font-size: 30px;
        padding-top: 15px;
      }
      
      .starttext {
        font-size: 16px;
        padding: 0px 20px 10px;
      }
    }

  </style>

  <body>


  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>

    <div id="islamquiz" class="container">
      <div class="row">
        <div id="left-column" class="col-sm-12 col-xs-12">
          <div id="box01" class="box" id2="shiite">
            <div class="text">
              <div class="intext">Believe that Islamic leadership must come through the Prophet Muhammad's bloodline. They support Ali, Muhammad's cousin and son-in-law as the legitimate successor.</div>
            </div>
          </div>
          <div id="box02" class="box" id2="shiite">
            <div class="text">
              <div class="intext">Their supreme leader was killed in 680 by the ruling rival sect. They value martyrdom and sacrifice.</div>
            </div>
          </div>
          <div id="box03" class="box" id2="sunni">
            <div class="text">
              <div class="intext">Believe that Islamic leadership should be given to the most qualified individual. They elected Abu Bakr, a friend of Muhammad and the father of his wife Aisha, as the rightful successor.</div>
            </div>
          </div>
          <div id="box04" class="box" id2="shiite">
            <div class="text">
              <div class="intext">They are the majority in Iran, Iraq and Bahrain, and have endured a long history of marginalization in the Arab world.</div>
            </div>
          </div>
          <div id="box05" class="box" id2="sunni">
            <div class="text">
              <div class="intext">They are 85% of the world's 1.6 billion Muslims. They are the majority in Saudi Arabia, Turkey, Pakistan, India, Bangladesh, Malaysia and Indonesia.</div>
            </div>
          </div>
          <div id="box06" class="box" id2="shiite">
            <div class="text">
              <div class="intext">Karbala, Kufa and Najaf in Iraq are considered as revered shrines.</div>
            </div>
          </div>
          <div id="box07" class="box" id2="sunni">
            <div class="text">
              <div class="intext">Ousted Iraqi Dictator Saddam Hussein is a member of this sect.</div>
            </div>
          </div>
          <div id="box08" class="box" id2="both">
            <div class="text">
              <div class="intext">Perform pilgrimage to Mecca, the holy shrine, and regard the Koran as holy book.</div>
            </div>
          </div>
          <div id="box09" class="box" id2="shiite">
            <div class="text">
              <div class="intext">Believe that the 12th and final imam is hidden and will return one day as Mahdi or Messiah to fulfill divine will.</div>
            </div>
          </div>
          <div id="box10" class="box" id2="both">
            <div class="text">
              <div class="intext">Fast during the holy month of Ramadan.</div>
            </div>
          </div>
          <div id="box11" class="box" id2="sunni">
            <div class="text">
              <div class="intext">Their members include ISIS and Osama Bin Laden.</div>
            </div>
          </div> 
          <div id="box12" class="box" id2="sunni">
            <div class="text">
              <div class="intext">Islamic authority is based more on the Koran and the traditions of Mohammed compared to religious scholars.</div>
            </div>
          </div>
          <div id="box13" class="box" id2="shiite">
            <div class="text">
              <div class="intext">Include the Alawite sect of Syrian President Bashar al-Assad.</div>
            </div>
          </div> 
          <div id="box14" class="box" id2="shiite">
            <div class="text">
              <div class="intext">Give great authority to their ayatollahs, or high-ranking Muslim scholars, who are seen as God's guides.</div>
            </div>
          </div>
          <div id="box15" class="box" id2="both">
            <div class="text">
              <div class="intext">Believe Allah is the only God and Muhammad his messenger.</div>
            </div>
          </div>
          <div id="bufferbox"></div>
        </div>
      </div>
      <div id="bottombox">
        <div id="dropbox01" class="dropbox" id2="sunni">
          <div class="sect">Sunni</div>
          <div class="counter">5</div>
        </div>
        <div id="dropbox02" class="dropbox" id2="both">
          <div class="sect">Sunni & Shiite</div>
          <div class="counter">3</div>
        </div>
        <div id="dropbox03" class="dropbox" id2="shiite">
          <div class="sect">Shiite</div>
          <div class="counter">7</div>
        </div>
      </div> 
      <div id="correctbox" class="popup">
        <div class="correctmsg">Correct!</div>
      </div> 
      <div id="wrongbox" class="popup">
        <div class="wrongmsg">Wrong!</div>
        <div class="wrongtext">You still have</div>  
        <div class="wrongnum">3</div> 
        <div class="wrongtext">chances</div> 
      </div> 
      <div id="replaybox" class="popup">
        <div class="overmsg">Sorry, you lost</div>
        <button type="button" class="btn btn-primary btn-lg center-block" id="refresh-btn" onclick="location.reload();sendreplay();">Play again</button>
      </div> 
      <div id="winbox" class="popup">
        <div class="winmsg">You made it!</div>
        <button type="button" class="btn btn-success btn-lg center-block" id="refresh-btn" onclick="location.reload();sendreplay();">Play again</button>
      </div>  
      <div id="startbox" class="popup">
        <div class="startmsg">How much do you know about Shiites and Sunnis?</div>
        <div class="starttext">
          <p>1. Drag the yellow boxes and drop them on one of the 3 purple boxes at the bottom based on whether they are characteristics of Shiite, Sunni or shared by both sects.</p>
          <p>2. The number in each purple box indicates how many more answers the box can accept.</p> 
          <p>3. You have 3 chances to be wrong before the round is over.</p>
        </div>
        <button type="button" class="btn btn-success btn-lg center-block" id="start-btn">Let's start</button>
      </div>  
    </div>
    




    <script>

      var counter = [5,3,7],
          lives = 3;

      function init() { 
        console.log("js ready!");
        $("#wrongbox, #correctbox, #winbox, #replaybox").hide();
        $("#islamquiz").addClass("darken");
        $("#start-btn").click(function(){
          $("#islamquiz").removeClass("darken");
          $("#startbox").hide();
          sendstart();
        });
        $(function() {

          $(".box").draggable({
              cursor: "pointer",
              revert: function(droppable){
                  if($(droppable).attr("id2") == $(this).attr("id2"))
                    {
                      var num = ($(droppable).index());
                      counter[num] = counter[num]-1;
                      console.log(counter);
                      $(this).fadeOut(1000);
                      if((counter[0]==0)&&(counter[1]==0)&&(counter[2]==0))
                        {
                          console.log("win!");
                          $(droppable).find( ".counter" ).html(counter[num]);
                          $("#winbox").fadeIn();
                          sendwin();
                          return false;
                        }
                        else{
                          $("#correctbox").fadeIn().delay(1000).fadeOut();
                          $(droppable).find( ".counter" ).html(counter[num]);
                          return false;
                        }
                    } 
                    else {
                      $(this).removeClass("selected");
                      return true
                    }
              },
              drag: function(){
                  $(this).addClass("selected");
                  
              },

          });

          $( ".dropbox" ).droppable({
              accept: ".box",
              activeClass: "active",
              hoverClass: "hover",
              drop: function(event,ui) {
                if($(ui.draggable).attr("id2")==$(this).attr("id2")){}
                  else {
                    lives = lives -1;
                    if(lives>0){
                      $(this).removeClass("selected");
                      $("#wrongbox").find( ".wrongnum" ).html(lives);
                      $("#wrongbox").fadeIn().delay(1000).fadeOut();
                      return true;                    
                    } else {
                      $("#replaybox").fadeIn();
                    }
                  } 
              }
          });        

        }); //close draggable and droppable function
      }; //close init function

      //Get IP address with Ipify, send data to google sheet
      function sendstart() {
        $.getJSON("https://api.ipify.org?format=jsonp&callback=?",
          function(json) {
            $.ajax({
              type: 'POST',
              url: 'https://docs.google.com/forms/d/1mQ6cDdq3uctHX4Y2KebPKNiaKOB98MowfN-_r3KESFs/formResponse',
              data: { 
                "entry.395832496": json.ip, //ip
                "entry.198242951": "yes",
              }
            }); 
          }
        );   
      } 

      function sendreplay() {
        $.getJSON("https://api.ipify.org?format=jsonp&callback=?",
          function(json) {
            $.ajax({
              type: 'POST',
              url: 'https://docs.google.com/forms/d/1mQ6cDdq3uctHX4Y2KebPKNiaKOB98MowfN-_r3KESFs/formResponse',
              data: { 
                "entry.395832496": json.ip, //ip
                "entry.1213217018": "yes",
              }
            }); 
          }
        );   
      }       

      function sendwin() {
        $.getJSON("https://api.ipify.org?format=jsonp&callback=?",
          function(json) {
            $.ajax({
              type: 'POST',
              url: 'https://docs.google.com/forms/d/1mQ6cDdq3uctHX4Y2KebPKNiaKOB98MowfN-_r3KESFs/formResponse',
              data: { 
                "entry.395832496": json.ip, //ip
                "entry.1380245918": "yes",
              }
            }); 
          }
        );   
      } 

      $(document).ready(function(){
        init();
      });

    </script>
  </body>
</html>  

