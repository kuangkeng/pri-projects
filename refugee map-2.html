<!doctype html>
<html lang="en">
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/maps/modules/map.js"></script>
<script src="https://code.highcharts.com/maps/modules/data.js"></script>
<script src="https://code.highcharts.com/mapdata/countries/us/us-all.js"></script>
<script src="https://rawgit.com/larsac07/Motion-Highcharts-Plugin/master/motion.js"></script>


<style>
@import "http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css";

body {
  font-family: "Source Sans Pro","Helvetica Neue",Helvetica,Arial,"Nimbus Sans L",sans-serif;
  font-size: 112.5%;
  line-height: 1.5em;
  color: #33333c;
      }  

#container{
height: 600px; 
max-width: 850px; 
margin: 0 auto;
border:1px solid #D3D3D3;
}

#play-controls {
    text-align: center;
    width: 100%;
    padding: 5px 0 1em 0;
}
#play-controls * {
    display: inline-block;
    vertical-align: middle;
}
#play-pause-button {
    width: 30px;
    height: 30px;
    text-align: center;
    font-size: 15px;
    outline: none;
    cursor: pointer;
}
#play-range {
    margin: 2.5%;
    width: 70%;
}

</style>

</head>
<body>
<div id="container"></div>
</body>

<script>


function updateTitle() {
	window.setInterval(function(){
	  	var input = $("#play-output").html();
		chart.setTitle({ text: 'Leading country of origin of refugees ' + input });
		}, 500);
};	

$('#container').click(function() {
	updateTitle()
});

var data = [{"code":"AL", "sequence":[255,75,75,165,165,65,125,125,125,195,195,125,125,85], "value":85},
			{"code":"AK", "sequence":[225,165,135,135,225,235,205,35,35,195,55,205,195,195], "value":195},
			{"code":"AZ", "sequence":[175,195,195,195,195,55,125,125,125,35,125,125,125,85], "value":85},
			{"code":"AR", "sequence":[155,115,135,245,155,75,125,125,125,35,55,55,55,55], "value":55},
			{"code":"CA", "sequence":[225,225,135,135,115,115,115,125,125,125,125,125,125,115], "value":115},
			{"code":"CO", "sequence":[165,225,195,165,195,55,55,35,35,35,35,55,55,55], "value":55},
			{"code":"CT", "sequence":[45,145,195,195,165,55,55,125,125,55,125,125,125,255,], "value":255},
			{"code":"DE", "sequence":[255,145,255,145,145,145,125,125,55,55,155,55,55,265], "value":265},
			{"code":"DC", "sequence":[105,105,185,105,165,105,125,125,125,95,125,125,95,95], "value":95},
			{"code":"FL", "sequence":[75,75,75,75,75,75,75,75,75,75,75,75,75,75], "value":75},
			{"code":"GA", "sequence":[245,105,195,165,195,55,55,35,55,35,35,55,55,55], "value":55},
			{"code":"HI", "sequence":[245,245,245,245,245,245,55,255,155,55,155,125,55,55], "value":55},
			{"code":"ID", "sequence":[45,15,195,165,165,65,125,35,55,35,55,125,125,85], "value":85},
			{"code":"IL", "sequence":[175,175,195,165,195,55,125,125,125,55,125,125,125,55], "value":55},
			{"code":"IN", "sequence":[225,145,195,55,55,55,55,55,55,55,55,55,55,55], "value":55},
			{"code":"IA", "sequence":[45,205,205,205,205,55,55,55,55,55,55,55,55,55], "value":55},
			{"code":"KS", "sequence":[15,205,195,245,165,55,55,55,55,55,55,55,55,55], "value":55},
			{"code":"KY", "sequence":[45,195,195,165,165,55,55,55,55,35,35,55,125,55], "value":55},
			{"code":"LA", "sequence":[45,15,145,75,75,75,75,55,55,55,55,125,125,55], "value":55},
			{"code":"ME", "sequence":[205,205,205,195,195,195,195,195,195,195,125,125,125,195], "value":195},
			{"code":"MD", "sequence":[115,185,195,165,165,55,55,35,35,35,55,55,55,55], "value":55},
			{"code":"MA", "sequence":[225,225,195,195,195,65,125,125,125,35,125,125,125,195,], "value":195},
			{"code":"MI", "sequence":[45,145,195,165,195,125,125,125,125,125,125,125,125,125,], "value":125},
			{"code":"MN", "sequence":[145,105,135,195,195,195,55,55,55,55,55,55,195,195], "value":195},
			{"code":"MS", "sequence":[255,255,195,115,15,205,125,15,85,195,255,255,95,15], "value":15},
			{"code":"MO", "sequence":[45,195,195,165,195,195,55,55,55,55,35,195,195,85], "value":85},
			{"code":"MT", "sequence":[25,25,25,225,155,55,125,125,155,155,125,155,155,155], "value":155},
			{"code":"NE", "sequence":[205,205,205,205,205,55,55,55,55,55,55,55,55,55], "value":55},
			{"code":"NV", "sequence":[175,175,75,75,75,75,75,75,75,75,75,75,75,85], "value":85},
			{"code":"NH", "sequence":[45,205,195,165,165,65,35,35,35,35,35,35,85,85], "value":85},
			{"code":"NJ", "sequence":[75,145,145,165,145,55,55,55,75,75,75,75,75,215], "value":215},
			{"code":"NM", "sequence":[75,255,75,75,215,75,125,125,125,55,55,125,125,15], "value":15},
			{"code":"NY", "sequence":[225,225,195,145,55,55,55,55,55,55,35,55,55,55], "value":55},
			{"code":"NC", "sequence":[245,245,195,245,245,55,55,55,55,55,55,55,55,55], "value":55},
			{"code":"ND", "sequence":[45,145,145,195,195,195,35,35,35,35,35,35,35,35], "value":35},
			{"code":"OH", "sequence":[225,195,195,195,195,195,55,35,35,35,35,35,35,35], "value":35},
			{"code":"OK", "sequence":[245,255,145,165,195,55,55,55,55,55,55,55,55,55], "value":55},
			{"code":"OR", "sequence":[225,225,225,225,225,55,55,125,55,55,125,125,125,55], "value":55},
			{"code":"PA", "sequence":[225,145,145,165,165,145,55,35,35,35,35,35,35,35], "value":35},
			{"code":"RI", "sequence":[225,145,145,145,145,145,65,35,35,255,35,35,125,85], "value":85},
			{"code":"SC", "sequence":[225,225,195,195,55,55,55,55,55,55,55,55,55,55], "value":55},
			{"code":"SD", "sequence":[225,205,195,195,195,195,195,35,55,35,35,35,35,255], "value":255},
			{"code":"TN", "sequence":[175,205,195,195,195,65,125,55,125,55,55,125,125,55], "value":55},
			{"code":"TX", "sequence":[245,205,195,195,195,55,55,55,55,55,55,125,125,55], "value":55},
			{"code":"UT", "sequence":[15,205,195,195,195,55,55,55,35,55,195,125,195,195], "value":195},
			{"code":"VT", "sequence":[45,255,195,165,165,65,35,35,35,35,35,35,35,35], "value":35},
			{"code":"VA", "sequence":[45,185,195,195,165,55,125,35,125,35,125,125,125,125,], "value":125},
			{"code":"WA", "sequence":[225,225,225,225,225,225,55,55,55,55,55,125,125,225], "value":225},
			{"code":"WV", "sequence":[95,115,155,245,155,155,55,125,125,55,125,95,125,95], "value":95},
			{"code":"WI", "sequence":[175,175,135,135,135,55,55,55,55,55,55,55,55,55], "value":55},
			{"code":"WY", "sequence":[125,225,155,155,155,155,155,155,155,155,155,155,155,155], "value":155}
];

var chart = new Highcharts.Map({
	chart: {
		renderTo: 'container',
		marginBottom: 90,
	},
    
    title : {
        text: 'Leading country of origin of refugees 2015',
    },
    subtitle : {
        text: "This map only shows the country of origin of the largest refugee group in that particular state.<br>Source: <a href='http://www.wrapsnet.org/Reports/InteractiveReporting/tabid/393/Default.aspx' target='_blank'>Refugee Processing Center</a>",
        useHTML: true,
        floating: true,
        align: 'left',
        verticalAlign: 'bottom',
        y: -40,
        style: {
            color: '#808080',
            fontSize: '10px',
        },
    },
    legend: { enabled: false },
    mapNavigation: {
        enabled: true,
        buttonOptions: {
          verticalAlign: 'bottom',
          align: 'right',
          floating: true,
        },
    },

    colorAxis: {
        dataClasses: [
        	{from:10, to:20, color: "#2a2a2a"},
			{from:20, to:30, color: "#545454"},
			{from:30, to:40, color: "#33a02c"},
			{from:40, to:50, color: "#cab2d6"},
			{from:50, to:60, color: "#ff7f00"},
			{from:60, to:70, color: "#7e7e7e"},
			{from:70, to:80, color: "#e31a1c"},
			{from:80, to:90, color: "#a6cee3"},
			{from:90, to:100, color: "#a8a8a8"},
			{from:100, to:110, color: "#d3d3d3"},
			{from:110, to:120, color: "#d7d7d7"},
			{from:120, to:130, color: "#fb9a99"},
			{from:130, to:140, color: "#e0e0e0"},
			{from:140, to:150, color: "#b15928"},
			{from:150, to:160, color: "#ffffff"},
			{from:160, to:170, color: "#fdbf6f"},
			{from:170, to:180, color: "#696969"},
			{from:180, to:190, color: "#939393"},
			{from:190, to:200, color: "#b2df8a"},
			{from:200, to:210, color: "#1f78b4"},
			{from:210, to:220, color: "#bdbdbd"},
			{from:220, to:230, color: "#6a3d9a"},
			{from:230, to:240, color: "#d3d3d3"},
			{from:240, to:250, color: "#ffff99"},
			{from:250, to:260, color: "#e4e4e4"},
			{from:260, to:270, color: "#dbdbdb"},
		]
    },

    motion: {
        enabled: true,
        axisLabel: 'year',
        labels: [2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015],
        series: 0, // The series which holds points to update
        updateInterval: 100,
        magnet: {
            round: 'floor', // ceil / floor / round
            step: 0.05
        }
    },

    tooltip: {
        headerFormat: '',
        pointFormatter: function () {
            	if (this.value == 15) {return "<b>" + this.name + "</b>" + "<br>Afghanistan"}
				if (this.value == 25) {return "<b>" + this.name + "</b>" + "<br>Belarus"}
				if (this.value == 35) {return "<b>" + this.name + "</b>" + "<br>Bhutan"}
				if (this.value == 45) {return "<b>" + this.name + "</b>" + "<br>Bosnia & Herzegovina"}
				if (this.value == 55) {return "<b>" + this.name + "</b>" + "<br>Burma"}
				if (this.value == 65) {return "<b>" + this.name + "</b>" + "<br>Burundi"}
				if (this.value == 75) {return "<b>" + this.name + "</b>" + "<br>Cuba"}
				if (this.value == 85) {return "<b>" + this.name + "</b>" + "<br>DR Congo"}
				if (this.value == 95) {return "<b>" + this.name + "</b>" + "<br>Eritrea"}
				if (this.value == 105) {return "<b>" + this.name + "</b>" + "<br>Ethiopia"}
				if (this.value == 115) {return "<b>" + this.name + "</b>" + "<br>Iran"}
				if (this.value == 125) {return "<b>" + this.name + "</b>" + "<br>Iraq"}
				if (this.value == 135) {return "<b>" + this.name + "</b>" + "<br>Laos"}
				if (this.value == 145) {return "<b>" + this.name + "</b>" + "<br>Liberia"}
				if (this.value == 155) {return "<b>" + this.name + "</b>" + "<br>None"}
				if (this.value == 165) {return "<b>" + this.name + "</b>" + "<br>Russia"}
				if (this.value == 175) {return "<b>" + this.name + "</b>" + "<br>Serbia"}
				if (this.value == 185) {return "<b>" + this.name + "</b>" + "<br>Sierra Leone"}
				if (this.value == 195) {return "<b>" + this.name + "</b>" + "<br>Somalia"}
				if (this.value == 205) {return "<b>" + this.name + "</b>" + "<br>Sudan"}
				if (this.value == 215) {return "<b>" + this.name + "</b>" + "<br>Syria"}
				if (this.value == 225) {return "<b>" + this.name + "</b>" + "<br>Ukraine"}
				if (this.value == 235) {return "<b>" + this.name + "</b>" + "<br>Uzbekistan"}
				if (this.value == 245) {return "<b>" + this.name + "</b>" + "<br>Vietnam"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Afghanistan/Liberia"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Afghanistan/Vietnam"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Afghanistan/Liberia/Sudan"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Azerbaijan/Somalia"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Cuba/Liberia"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Liberia/Serbia"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Eritrea/Sierra Leone"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Russia/Vietnam"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Bhutan/Burma"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Afghanistan/Burma"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Burma/Cuba/Iran"}
				if (this.value == 255) {return "<b>" + this.name + "</b>" + "<br>Iran/Sudan"}
				if (this.value == 265) {return "<b>" + this.name + "</b>" + "<br>Sri Lanka"}
        	},
    },
    credits: { text: 'Kuang Keng Kuek Ser / PRI' },
    series: [{
        mapData: Highcharts.maps['countries/us/us-all'],
        joinBy: ['postal-code', 'code'],
        data: data,
        dataLabels: {
            enabled: true,
            color: '#FFFFFF',
            allowOverlap: 'true',
            style: {
                fontSize: '10px',
                },
            formatter: function () {
            	if (this.point.value == 15) {return "Afghanistan"}
				if (this.point.value == 25) {return "Belarus"}
				if (this.point.value == 35) {return "Bhutan"}
				if (this.point.value == 45) {return "Bosnia & Herzegovina"}
				if (this.point.value == 55) {return "Burma"}
				if (this.point.value == 65) {return "Burundi"}
				if (this.point.value == 75) {return "Cuba"}
				if (this.point.value == 85) {return "DR Congo"}
				if (this.point.value == 95) {return "Eritrea"}
				if (this.point.value == 105) {return "Ethiopia"}
				if (this.point.value == 115) {return "Iran"}
				if (this.point.value == 125) {return "Iraq"}
				if (this.point.value == 135) {return "Laos"}
				if (this.point.value == 145) {return "Liberia"}
				if (this.point.value == 155) {return "None"}
				if (this.point.value == 165) {return "Russia"}
				if (this.point.value == 175) {return "Serbia"}
				if (this.point.value == 185) {return "Sierra Leone"}
				if (this.point.value == 195) {return "Somalia"}
				if (this.point.value == 205) {return "Sudan"}
				if (this.point.value == 215) {return "Syria"}
				if (this.point.value == 225) {return "Ukraine"}
				if (this.point.value == 235) {return "Uzbekistan"}
				if (this.point.value == 245) {return "Vietnam"}
				if (this.point.value == 255) {return "Afghanistan/Liberia"}
				if (this.point.value == 255) {return "Afghanistan/Vietnam"}
				if (this.point.value == 255) {return "Afghanistan/Liberia/Sudan"}
				if (this.point.value == 255) {return "Azerbaijan/Somalia"}
				if (this.point.value == 255) {return "Cuba/Liberia"}
				if (this.point.value == 255) {return "Liberia/Serbia"}
				if (this.point.value == 255) {return "Eritrea/Sierra Leone"}
				if (this.point.value == 255) {return "Russia/Vietnam"}
				if (this.point.value == 255) {return "Bhutan/Burma"}
				if (this.point.value == 255) {return "Afghanistan/Burma"}
				if (this.point.value == 255) {return "Burma/Cuba/Iran"}
				if (this.point.value == 255) {return "Iran/Sudan"}
				if (this.point.value == 265) {return "Sri Lanka"}
        	},
        },
    }]
});

if ($(window).width() < 500) {           
   	chart.series[0].update({
	    dataLabels: {
	        allowOverlap: false
	    }
	});
}


</script>