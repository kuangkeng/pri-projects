<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>

<style>
body {
  font-family: "Source Sans Pro","Helvetica Neue",Helvetica,Arial,"Nimbus Sans L",sans-serif;
  font-size: 112.5%;
  line-height: 1.5em;
  color: #33333c;
      }  

#container{
height: 480px; 
max-width: 850px;
}

#wrapper {
    border:1px solid #D3D3D3;
    max-width: 850px; 
    margin: 0 auto;
}

#note {
    font-size: 11px;
    color: #808080;
    line-height: 14px;
    padding:0px 10px 10px 10px;
}

#credit {
    font-size: 10px;
    padding-top: 10px;
    text-align: right;
}

#text {
    font-size: 14px;
    line-height: 17px;
    margin-bottom: 5px;
  color:#33333c;
}

@media (max-width: 400px ) { 
    #text {font-size: 14px;line-height: 16px;padding-bottom: 3px;}
    .highcharts-title {font-size: 16px !important;}
    #container {height: 450px;}
} 

</style>
</head>

<body>
<div id="wrapper">    
    <div id="container"></div>
    <div id="note">
        <div id="text">High-level secret talks between the Turkish government and Kurdistan Workers' Party (PKK) collapsed in June 2011 followed by escalating violence. A ceasefire was later reached on March 21, 2013 but broke down on July 25, 2015.</div>
        *2017 data includes only the Jan. 1 nightclub incident.<br>
        Source: Data until 2015 is from 
        <a href='http://www.start.umd.edu/gtd/' target='_blank'>Global Terorrism Database</a>. Data for 2016 is compiled from media reports.
        <div id="credit">Kuang Keng Kuek Ser / PRI</div>
    </div>
</div>
</body>

<script>
$(function () {
    var chart;
    $(document).ready(function() {

        Highcharts.setOptions({
            lang: {
              thousandsSep: ','
            }
        }),

        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column',
            },
            title: {
                text: 'Deaths by terrorist attack in Turkey, 2003-2017',
                margin: 20,
            },
            subtitle: {
                enabled: false,
            },
            xAxis: {
                categories: ["2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017"],  
                plotBands: [{
                  color: '#f2f2f2',
                  from: 9.75,
                  to: 12,
                  label:{
                      rotation: 270,
                      useHTML: true,
                      text: "Ankara-PKK<br>ceasefire",
                      y: 80,
                      style: {
                        fontSize: '11px',
                        color: '#808080',
                        textAlign:'center',
                      }
                  }
                }], 
              plotLines: [{
                  value: 8,
                  color: '#808080',
                  dashStyle: 'shortdash',
                  width: 1,
                  label: {
                      rotation: 270,
                      useHTML: true,
                      text: "Ankara-PKK secret<br>talks collapse",
                      x:-20,
                      y:130,
                      style: {
                          fontSize: '11px',
                          color: '#808080',
                          textAlign:'center',
                      }
                  }
              }]                     
            },
            yAxis: {
                title: {
                  text: null,
                  style: {
                    color: '#808080',
                    fontSize: '11px',
                  },  
                  x:-40,
                },
                endOnTick: false,
            },
            credits: { enabled: false, },
            legend: {},
            tooltip: {
                pointFormat: 'Total deaths: <b>{point.stackTotal}<b><br>By {point.series.name}: <b>{point.y}</b>',
            },
            plotOptions: {
                series:{
                    stacking: 'normal',
                    groupPadding: 0.05,
                    pointPadding: 0,
                    stickyTracking: false,
                    dataLabels: {
                        enabled: true,
                        style: {
                            fontSize: '11px',
                        },
                        formatter: function() {
                            if (this.y!=0) {return this.y}
                        },
                    }
                },
            },    

            series: [ 
                {name:"Others", color:"#00e0ff", data: [56,7,10,23,9,8,13,0,0,18,16,14,14,139,0]},
                {name:"ISIS", color:"#000000", data: [0,0,0,0,0,0,0,0,0,0,52,3,152,125,39]},
                {name:"PKK", color:"#ff1300", data: [11,17,25,22,16,34,5,13,25,226,14,21,286,220,0]}
            ],
            });
    });
});
</script>